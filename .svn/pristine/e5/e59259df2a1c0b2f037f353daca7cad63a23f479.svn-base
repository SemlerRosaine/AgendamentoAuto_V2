/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package visualizacao.consultor;

import controle.RandomPassword;
import controle.ValidaCpf;
import java.awt.HeadlessException;
import java.awt.event.KeyEvent;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JOptionPane;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import modelo.Consultor;
import modelo.dao.ConsultorDao;
import visualizacao.componentes.text.formatted.CPFTextField;
import visualizacao.componentes.button.DeleteButton;
import visualizacao.componentes.button.EditButton;
import visualizacao.componentes.button.NewButton;
import visualizacao.componentes.button.SaveButton;
import visualizacao.componentes.button.SearchButton;
import visualizacao.componentes.table.NonEditableTableModel;
import visualizacao.componentes.text.RequiredTextField;
import visualizacao.componentes.text.txt.TextFieldCpfEnterAction;
import visualizacao.componentes.text.txt.TextFieldEnterAction;

/**
 *
 * @author Rosaine Fiorio
 */
public class TelaConsultor extends javax.swing.JInternalFrame {

    private List<Consultor> consultores;
    private Consultor consultor;

    public TelaConsultor() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        grupoPesquisa = new javax.swing.ButtonGroup();
        panelCadastro = new javax.swing.JTabbedPane();
        jPanel3 = new javax.swing.JPanel();
        lblNomeConsultor = new javax.swing.JLabel();
        lblDataNascimentoConsultor = new javax.swing.JLabel();
        lblCPFConsultor = new javax.swing.JLabel();
        lblEnderecoConsultor = new javax.swing.JLabel();
        lblTelefoneConsultor = new javax.swing.JLabel();
        campoNomeConsultor = new RequiredTextField();
        campoDNConsultor = new visualizacao.componentes.text.formatted.DataTextField();
        campoCPFConsultor = new CPFTextField(true);
        campoEnderecoConsultor = new javax.swing.JTextField();
        campoTelefoneConsultor = new javax.swing.JTextField();
        botaoCadastrarConsultor = new SaveButton();
        btnNovo = new NewButton();
        btnGerarSenha = new javax.swing.JButton();
        jLabel2 = new javax.swing.JLabel();
        jSeparator1 = new javax.swing.JSeparator();
        txtSenhaConsultor = new RequiredTextField();
        jCGerente = new javax.swing.JCheckBox();
        jPanel4 = new javax.swing.JPanel();
        campoNomeBuscaConsultor = new TextFieldEnterAction(){
            public void onEnterKeyPress(KeyEvent evt){
                buscarConsultor();
            }
        };
        campoCPFBuscaConsultor = new TextFieldCpfEnterAction(){
            public void onEnterKeyPress(KeyEvent evt){
                buscarConsultor();
            }
        };
        botaoBuscarConsultor = new SearchButton();
        botaoApagarConsultor = new DeleteButton();
        botaoEditarConsultor = new EditButton();
        jScrollPane2 = new javax.swing.JScrollPane();
        tabelaBuscaConsultor = new javax.swing.JTable();
        rbNomeConsultor = new javax.swing.JRadioButton();
        rbCPFConsultor = new javax.swing.JRadioButton();

        setClosable(true);
        setFrameIcon(new javax.swing.ImageIcon(getClass().getResource("/visualizacao/imagens/consultor.png"))); // NOI18N

        lblNomeConsultor.setText("Nome");

        lblDataNascimentoConsultor.setText("Data de Nascimento");

        lblCPFConsultor.setText("CPF");

        lblEnderecoConsultor.setText("Endereço");

        lblTelefoneConsultor.setText("Telefone");

        campoNomeConsultor.setEnabled(false);

        campoDNConsultor.setEnabled(false);

        campoCPFConsultor.setEnabled(false);
        campoCPFConsultor.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                campoCPFConsultorFocusLost(evt);
            }
        });

        campoEnderecoConsultor.setEnabled(false);
        campoEnderecoConsultor.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                campoEnderecoConsultorActionPerformed(evt);
            }
        });

        campoTelefoneConsultor.setEnabled(false);

        botaoCadastrarConsultor.setText("Salvar");
        botaoCadastrarConsultor.setEnabled(false);
        botaoCadastrarConsultor.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                botaoCadastrarConsultorActionPerformed(evt);
            }
        });

        btnNovo.setText("Novo");
        btnNovo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnNovoActionPerformed(evt);
            }
        });

        btnGerarSenha.setText("Gerar senha");
        btnGerarSenha.setEnabled(false);
        btnGerarSenha.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnGerarSenhaActionPerformed(evt);
            }
        });

        jLabel2.setText("Senha:");

        txtSenhaConsultor.setEnabled(false);

        jCGerente.setText("Gerente");

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jSeparator1, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addComponent(btnNovo, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(botaoCadastrarConsultor, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addComponent(jLabel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(lblEnderecoConsultor, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(lblDataNascimentoConsultor, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(lblCPFConsultor, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 139, Short.MAX_VALUE)
                            .addComponent(lblNomeConsultor, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(lblTelefoneConsultor, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(campoNomeConsultor)
                            .addComponent(campoEnderecoConsultor)
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addComponent(txtSenhaConsultor)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(btnGerarSenha))
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jCGerente)
                                    .addComponent(campoCPFConsultor, javax.swing.GroupLayout.PREFERRED_SIZE, 170, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(campoDNConsultor, javax.swing.GroupLayout.PREFERRED_SIZE, 170, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(campoTelefoneConsultor, javax.swing.GroupLayout.PREFERRED_SIZE, 170, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGap(0, 333, Short.MAX_VALUE)))))
                .addContainerGap())
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblCPFConsultor)
                    .addComponent(campoCPFConsultor, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblNomeConsultor)
                    .addComponent(campoNomeConsultor, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(campoDNConsultor, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblDataNascimentoConsultor))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblEnderecoConsultor)
                    .addComponent(campoEnderecoConsultor, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblTelefoneConsultor, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(campoTelefoneConsultor, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(btnGerarSenha)
                    .addComponent(txtSenhaConsultor, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jCGerente)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 9, Short.MAX_VALUE)
                .addComponent(jSeparator1, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(botaoCadastrarConsultor)
                    .addComponent(btnNovo))
                .addContainerGap())
        );

        panelCadastro.addTab("Cadastro", jPanel3);

        campoNomeBuscaConsultor.setEnabled(false);

        campoCPFBuscaConsultor.setEnabled(false);

        botaoBuscarConsultor.setText("Buscar");
        botaoBuscarConsultor.setEnabled(false);
        botaoBuscarConsultor.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                botaoBuscarConsultorActionPerformed(evt);
            }
        });

        botaoApagarConsultor.setText("Excluir");
        botaoApagarConsultor.setEnabled(false);
        botaoApagarConsultor.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                botaoApagarConsultorActionPerformed(evt);
            }
        });

        botaoEditarConsultor.setText("Alterar");
        botaoEditarConsultor.setEnabled(false);
        botaoEditarConsultor.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                botaoEditarConsultorActionPerformed(evt);
            }
        });

        tabelaBuscaConsultor.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {

            }
        ));
        jScrollPane2.setViewportView(tabelaBuscaConsultor);

        grupoPesquisa.add(rbNomeConsultor);
        rbNomeConsultor.setText("Nome");
        rbNomeConsultor.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                rbNomeConsultorActionPerformed(evt);
            }
        });

        grupoPesquisa.add(rbCPFConsultor);
        rbCPFConsultor.setText("CPF");
        rbCPFConsultor.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                rbCPFConsultorActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel4Layout = new javax.swing.GroupLayout(jPanel4);
        jPanel4.setLayout(jPanel4Layout);
        jPanel4Layout.setHorizontalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 652, Short.MAX_VALUE)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel4Layout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addComponent(botaoEditarConsultor)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(botaoApagarConsultor))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel4Layout.createSequentialGroup()
                        .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(rbCPFConsultor, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(rbNomeConsultor, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(campoNomeBuscaConsultor)
                            .addGroup(jPanel4Layout.createSequentialGroup()
                                .addComponent(campoCPFBuscaConsultor, javax.swing.GroupLayout.PREFERRED_SIZE, 172, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(0, 0, Short.MAX_VALUE)))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(botaoBuscarConsultor, javax.swing.GroupLayout.PREFERRED_SIZE, 120, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap())
        );
        jPanel4Layout.setVerticalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel4Layout.createSequentialGroup()
                        .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(campoNomeBuscaConsultor, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(rbNomeConsultor))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(campoCPFBuscaConsultor, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(rbCPFConsultor)))
                    .addComponent(botaoBuscarConsultor, javax.swing.GroupLayout.PREFERRED_SIZE, 54, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 142, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(botaoApagarConsultor)
                    .addComponent(botaoEditarConsultor))
                .addContainerGap())
        );

        panelCadastro.addTab("Pesquisar", jPanel4);

        getContentPane().add(panelCadastro, java.awt.BorderLayout.CENTER);

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void botaoBuscarConsultorActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_botaoBuscarConsultorActionPerformed
        buscarConsultor();
    }//GEN-LAST:event_botaoBuscarConsultorActionPerformed

    private void botaoEditarConsultorActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_botaoEditarConsultorActionPerformed
        this.consultor = this.consultores.get(this.tabelaBuscaConsultor.getSelectedRow());
        this.panelCadastro.setSelectedIndex(0);
        this.popularCamposTelaCadastro();
        this.habilitaFormularioCadastro(true);
    }//GEN-LAST:event_botaoEditarConsultorActionPerformed

    private void botaoApagarConsultorActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_botaoApagarConsultorActionPerformed
        this.consultor = this.consultores.get(this.tabelaBuscaConsultor.getSelectedRow());
        if (JOptionPane.showConfirmDialog(this, "Confirma a exclusão do cliente?") == JOptionPane.YES_OPTION) {
            this.consultor.setExcluido(true);
            new ConsultorDao().salvar(this.consultor);
        }
        this.consultor = null;
        buscarConsultor();
    }//GEN-LAST:event_botaoApagarConsultorActionPerformed

    private void botaoCadastrarConsultorActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_botaoCadastrarConsultorActionPerformed

        consultor.setNome(campoNomeConsultor.getText());
        consultor.setCpf(campoCPFConsultor.getText());
        consultor.setDataNascimento(campoDNConsultor.getText());
        consultor.setEndereco(campoEnderecoConsultor.getText());
        consultor.setTelefone(campoTelefoneConsultor.getText());
        consultor.setGerente(this.jCGerente.getModel().isSelected());
        if(!"".equals(this.txtSenhaConsultor.getText().trim())){
            this.consultor.setSenha(this.txtSenhaConsultor.getText());
        }
        consultor.setTrocarSenha(true);

        if (validaFormulario()) {
            if ((new ConsultorDao().salvar(this.consultor, (!"".equals(this.txtSenhaConsultor.getText().trim())))) instanceof Consultor) {
                JOptionPane.showMessageDialog(this, "Consultor salvo com sucesso.");
            } else {
                JOptionPane.showMessageDialog(this, "Ocorreu um erro ao salvar o consultor, por favor, reinicie o processo de cadastramento.", "Erro", JOptionPane.ERROR_MESSAGE);
            }
            this.habilitaFormularioCadastro(false);
            this.limparCamposTelaCadastro();
        } else {
            JOptionPane.showMessageDialog(this, "Há campos necessários não preenchidos, por favor, verifique.", "Erro", JOptionPane.ERROR_MESSAGE);
        }
    }//GEN-LAST:event_botaoCadastrarConsultorActionPerformed

    private void campoEnderecoConsultorActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_campoEnderecoConsultorActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_campoEnderecoConsultorActionPerformed

    private void btnNovoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnNovoActionPerformed
        this.consultor = new Consultor();
        this.habilitaFormularioCadastro(true);
        this.limparCamposTelaCadastro();
    }//GEN-LAST:event_btnNovoActionPerformed

    private void campoCPFConsultorFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_campoCPFConsultorFocusLost
        if (ValidaCpf.isCPF(campoCPFConsultor.getText().trim())) {
            Consultor consultor = new ConsultorDao().buscaConsultor(campoCPFConsultor.getText().trim());
            if (consultor instanceof Consultor) {
                this.consultor = consultor;
                this.popularCamposTelaCadastro();
            }
        } else if (!("".equals(campoCPFConsultor.getText().trim().replaceAll(" ", "").replaceAll("\\.", "").replaceAll("-", "")))) {
            JOptionPane.showMessageDialog(this, "O CPF digitado é inválido.", "Atenção", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_campoCPFConsultorFocusLost

    private void btnGerarSenhaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnGerarSenhaActionPerformed
        this.txtSenhaConsultor.setText(RandomPassword.getRandomString(4));
    }//GEN-LAST:event_btnGerarSenhaActionPerformed

    private void rbNomeConsultorActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_rbNomeConsultorActionPerformed
        this.campoNomeBuscaConsultor.setEnabled(true);
        this.campoCPFBuscaConsultor.setEnabled(false);
        this.botaoBuscarConsultor.setEnabled(true);
    }//GEN-LAST:event_rbNomeConsultorActionPerformed

    private void rbCPFConsultorActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_rbCPFConsultorActionPerformed
        this.campoNomeBuscaConsultor.setEnabled(false);
        this.campoCPFBuscaConsultor.setEnabled(true);
        this.botaoBuscarConsultor.setEnabled(true);
    }//GEN-LAST:event_rbCPFConsultorActionPerformed

    private void limparCamposTelaCadastro() {
        this.campoNomeConsultor.setText(null);
        this.campoDNConsultor.setText(null);
        this.campoCPFConsultor.setText(null);
        this.campoEnderecoConsultor.setText(null);
        this.campoTelefoneConsultor.setText(null);

        this.txtSenhaConsultor.setText(null);

    }

    private void habilitaFormularioCadastro(Boolean valor) {
        this.campoNomeConsultor.setEnabled(valor);
        this.campoDNConsultor.setEnabled(valor);
        this.campoCPFConsultor.setEnabled(valor);
        this.campoEnderecoConsultor.setEnabled(valor);
        this.campoTelefoneConsultor.setEnabled(valor);
        this.txtSenhaConsultor.setEnabled(valor);

        this.btnGerarSenha.setEnabled(valor);

        this.botaoCadastrarConsultor.setEnabled(valor);

        this.campoCPFConsultor.requestFocus();
    }

    private void campoNomeBuscaConsultorKeyReleased(java.awt.event.KeyEvent evt) {
        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
            this.buscarConsultor();
        } else {
            if (this.campoNomeBuscaConsultor.getText().trim().length() > 0) {
                this.campoCPFBuscaConsultor.setText(null);
                this.botaoBuscarConsultor.setEnabled(true);
            }
        }
    }

    private void campoCPFBuscarConsultorKeyReleased(java.awt.event.KeyEvent evt) {
        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
            this.buscarConsultor();
        } else {
            if (this.campoCPFBuscaConsultor.getText().trim().length() > 0) {
                this.campoNomeBuscaConsultor.setText(null);
                this.botaoBuscarConsultor.setEnabled(true);
            }
        }
    }
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton botaoApagarConsultor;
    private javax.swing.JButton botaoBuscarConsultor;
    private javax.swing.JButton botaoCadastrarConsultor;
    private javax.swing.JButton botaoEditarConsultor;
    private javax.swing.JButton btnGerarSenha;
    private javax.swing.JButton btnNovo;
    private javax.swing.JTextField campoCPFBuscaConsultor;
    private javax.swing.JTextField campoCPFConsultor;
    private javax.swing.JTextField campoDNConsultor;
    private javax.swing.JTextField campoEnderecoConsultor;
    private javax.swing.JTextField campoNomeBuscaConsultor;
    private javax.swing.JTextField campoNomeConsultor;
    private javax.swing.JTextField campoTelefoneConsultor;
    private javax.swing.ButtonGroup grupoPesquisa;
    private javax.swing.JCheckBox jCGerente;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JSeparator jSeparator1;
    private javax.swing.JLabel lblCPFConsultor;
    private javax.swing.JLabel lblDataNascimentoConsultor;
    private javax.swing.JLabel lblEnderecoConsultor;
    private javax.swing.JLabel lblNomeConsultor;
    private javax.swing.JLabel lblTelefoneConsultor;
    private javax.swing.JTabbedPane panelCadastro;
    private javax.swing.JRadioButton rbCPFConsultor;
    private javax.swing.JRadioButton rbNomeConsultor;
    private javax.swing.JTable tabelaBuscaConsultor;
    private javax.swing.JTextField txtSenhaConsultor;
    // End of variables declaration//GEN-END:variables

    private void buscarConsultor() throws HeadlessException {

        this.habilitaFormularioCadastro(false);

        this.consultores = new ArrayList<Consultor>();
        if (this.campoNomeBuscaConsultor.getText().trim().length() > 0) {
            consultores = new ConsultorDao().buscaConsultorPorNome(this.campoNomeBuscaConsultor.getText().trim());
        } else if (this.campoCPFBuscaConsultor.getText().trim().replaceAll("\\.", "").replace("-", "").length() > 0) {
            consultores = new ConsultorDao().buscaConultorPorCPF(this.campoCPFBuscaConsultor.getText().trim());
        } else {
            JOptionPane.showMessageDialog(this, "É necessário informar o nome ou CPF do cliente para realizar a busca.", "Atenção", JOptionPane.WARNING_MESSAGE);
        }

        NonEditableTableModel defaultTableModel = new NonEditableTableModel();
        defaultTableModel.setColumnIdentifiers(new String[]{"Nome", "Data de nascimento", "CPF", "Endereço", "Telefone"});

        for (Consultor consultor : consultores) {
            defaultTableModel.addRow(new String[]{consultor.getNome(), consultor.getDataNascimento(), consultor.getCpf(), consultor.getEndereco(), consultor.getTelefone()});
        }

        this.tabelaBuscaConsultor.setModel(defaultTableModel);
        this.tabelaBuscaConsultor.getColumnModel().getSelectionModel().addListSelectionListener(new ListSelectionListener() {
            @Override
            public void valueChanged(ListSelectionEvent lse) {
                botaoEditarConsultor.setEnabled(!tabelaBuscaConsultor.getColumnModel().getSelectionModel().isSelectionEmpty());
                botaoApagarConsultor.setEnabled(!tabelaBuscaConsultor.getColumnModel().getSelectionModel().isSelectionEmpty());
            }
        });
    }

    private void popularCamposTelaCadastro() {
        this.campoNomeConsultor.setText(this.consultor.getNome());
        this.campoDNConsultor.setText(this.consultor.getDataNascimento());
        this.campoCPFConsultor.setText(this.consultor.getCpf());
        this.campoEnderecoConsultor.setText(this.consultor.getEndereco());
        this.campoTelefoneConsultor.setText(this.consultor.getTelefone());

    }

    private boolean validaFormulario() {
        Boolean retorno = true;

        if (!((CPFTextField) this.campoCPFConsultor).runValidation()) {
            retorno = false;
        }
        if (!((RequiredTextField) this.campoNomeConsultor).runValidation()) {
            retorno = false;
        }

        if (this.consultor.getId() == null && !((RequiredTextField) this.txtSenhaConsultor).runValidation()) {
            retorno = false;
        }
        
        return retorno;

    }
}
